---
title: janitor2.py
layout: article
aside:
  toc: true
sidebar:
  nav: layouts
date: 2023-01-11
modify_date: 2023-01-11 11:36:41
tags: python foam
---

# janitor2.py

 300 篇筆記在code系統變成一個星空出來

![](../attachments/2023-01-11-23-28-20.png)

- original janitor: `shift-ctrl-p` run Foam: janitor
- change the preface further by janitor2.py

```python
kuang@125-229-149-182 ~/GitHub/FAQ
$ cat ~/bin/janitor2.py 
#!/opt/anaconda3/envs/py37/bin/python
import sys
fname=sys.argv[1]
with open(fname,'r') as f:
  line=[i for i in f]
ibeg=-1;iend=-1
for i in range(len(line)):
  if line[i][:10]=='[//begin]:':ibeg=i
  if line[i][:8]=='[//end]:':iend=i
if ibeg==-1 or iend==-1:sys.exit()
with open(fname,'w') as f:
  for i in range(ibeg+1):
    f.write(line[i])
  for i in range(ibeg+1,iend):
    if 'http' in line[i]:
      f.write(line[i])
    else:
      lst=line[i].split()
      url=lst[1]
      url_new='https://sinotec2.github.io/FAQ/'+url.replace('-','/').replace('.md','.html')
      f.write(lst[0]+' '+url_new+' '+lst[2]+'\n')
  for i in range(iend,len(line)):
    f.write(line[i])
```
