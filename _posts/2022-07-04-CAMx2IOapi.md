---
title: CAMx2IOAPI檔案之轉換
tags: CAMx ioapi
layout: article
aside:
  toc: true
sidebar:
  nav: layouts
---

## 背景
- CAMx自UAM模式承傳了[uamiv][uamiv]檔案格式，在CAMx6之前檔案IO並沒有其他格式的選項。
- 在PseudoNetCDF程式出台之前，檔案格式間的轉換必須自行撰寫程式。
- 甚至早期VERDI還不能接受CAMx輸出結果之前(<= CAMx2)，沒有適合的顯示軟體，還必須借助專屬付費軟體CAMxDESK才能快速瀏覽模擬結果。
- 雖然[pncgen][pnc]可以讀取[uamiv][uamiv]格式檔案，輸出ioapi之nc檔案，具體而言，與CAMx2IOAPI之間還是略有差異，說明如下表：

### CAMx2IOAPI與pncgen之間的差異比較

項目|CAMx2IOAPI|pncgen|說明
-|-|-|-
執行方式|用csh腳本控制|`pncgen -f uamiv -O $grd $nc`|
時間轉換|有時區概念|沒有時區概念|CMAQ為UTC、CAMx為LST
屬性NAME|仍然存在|將會消失|< CAMx7.10會需要確認NAME的內容
單位轉換|可|無|CAMx6+不會讀取nc檔中變數的單位屬性，CMAQ會讀取並隨之調整
變數名稱對照|會轉換|不會轉換|如果轉換模式機制pnc會有困難





```

[uamiv]: <https://github.com/sinotec2/camxruns/wiki/CAMx(UAM)的檔案格式> "CAMx所有二進制 I / O文件的格式，乃是遵循早期UAM(城市空氣流域模型EPA，1990年）建立的慣例。 該二進制文件包含4筆不隨時間改變的表頭記錄，其後則為時間序列的數據記錄。詳見CAMx(UAM)的檔案格式"
[pnc]: <https://sinotec2.github.io/Focus-on-Air-Quality/utilities/netCDF/pncgen/#pncgen> "FAQ -> Utilitie -> NetCDF Relatives -> ncgen & pncgen -> pncgen"
[add_ncatt]: <https://sinotec2.github.io/Focus-on-Air-Quality/utilities/netCDF/add_ncatt/> "增添CAMx nc檔案所需之全域屬性"
[cmaq2camx]: <https://camx-wp.azurewebsites.net/getmedia/cmaq2camx.22sep16.tgz> "CMAQ2CAMx converts CMAQ-formatted emissions and IC/BC files to CAMx Fortran binary formats.  See README and job scripts for more information.  You will need IO-API and netCDF libraries to compile and run this program.  Updated 8 April 2016 to process CAMx Polar and Mercator projections.  Updated 22 September 2016 to fix a minor bug checking map projection type for in-line point source files."
[BCON2bc]: <https://sinotec2.github.io/FAQ/2022/06/29/SlimCMAQ2CAMx.html#cmaq2camx> "BCON轉.bc檔->cmaq2camx"
[camx2ioapi]: <https://camx-wp.azurewebsites.net/getmedia/camx2ioapi.8apr16_1.tgz> "CAMx2IOAPI converts CAMx input emission files and output average concentration and deposition files in Fortran binary format to netCDF formats following the Models3/IO-API convention. "
[VERDI]: <https://www.airqualitymodeling.org/index.php/VERDI_1.5_User_Manual> "Visualization Environment for Rich Data Interpretation"